<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPCCREA</title>
    <meta name="description" content="Proyectos educativos sobre sexualidad, identidad y diversidad con dise√±o cyberpunk. Hecho por L_Adriano">
    <meta name="keywords" content="DPCCREA, sexualidad, identidad, diversidad, educaci√≥n, cyberpunk, L_Adriano">
    <meta name="author" content="L_Adriano">
    
    <!-- Meta tags adicionales de DPCCrea -->
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Sexualidad e Identidad - DPCCREA">
    <meta property="og:description" content="Explora recursos educativos sobre sexualidad, identidad y diversidad con un enfoque inclusivo y respetuoso.">
    <meta property="og:image" content="https://dpccrea.com/assets/imagenes/og-image.jpg">
    <meta property="og:url" content="https://dpccrea.com">
    <meta property="og:type" content="website">
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/imagenes/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    
    <style>
        @font-face { font-family: 'FrasesPersonalizada'; src: url('assets/fonts/frases/Small Cake.otf') format('opentype'); font-display: swap; }
        @font-face { font-family: 'NombresPersonalizada'; src: url('assets/fonts/nombre/Jumps Winter.otf') format('opentype'); font-display: swap; }

        * { margin:0; padding:0; box-sizing:border-box; }
        html, body {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0f0f, #1a1a2e, #16213e);
            color: white;
            overflow-x: hidden;
            font-family: 'Segoe UI', sans-serif;
        }

        /* ===== HERO SECTION ===== */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding-top: 80px;
            position: relative;
            z-index: 1;
        }
        .glitch {
            font-size: 8rem;
            font-weight: 900;
            text-transform: uppercase;
            text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff, 0.025em 0.04em 0 #fffc00;
            animation: glitch 725ms infinite;
            font-family: 'NombresPersonalizada', sans-serif;
        }
        @keyframes glitch {
            0% { text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff; }
            15% { text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff; }
            16% { text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff; }
            49% { text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff; }
            50% { text-shadow: 0.05em 0.05em 0 #00fffc, 0em 0em 0 #fc00ff; }
            99% { text-shadow: 0.05em 0.05em 0 #00fffc, 0em 0em 0 #fc00ff; }
            100% { text-shadow: -0.05em 0 0 #00fffc, -0.025em -0.04em 0 #fc00ff; }
        }

        .typewriter-container { height: 80px; margin: 2rem 0; }
        .typewriter { font-size: 2rem; letter-spacing: 3px; font-family: 'FrasesPersonalizada', sans-serif; }
        .typewriter-text { border-right: 3px solid #00fffc; padding-right: 5px; animation: blink 0.7s infinite; }
        @keyframes blink { 0%,100% { border-color:#00fffc; } 50% { border-color:transparent; } }

        /* ===== NAV MENU ===== */
        .nav-container {
            position: fixed; 
            top:0; 
            left:0; 
            width:100%; 
            background:rgba(0,0,0,0.95); 
            backdrop-filter:blur(15px);
            z-index:1000; 
            display:flex; 
            justify-content:space-between; 
            align-items:center; 
            padding:1rem 2rem;
        }
        .nav-container::after {
            content:''; 
            position:absolute; 
            bottom:0; 
            left:0; 
            width:100%; 
            height:2px;
            background:linear-gradient(90deg,#00fffc,#fc00ff,#fffc00,#00fffc); 
            background-size:300%; 
            animation:rgbFlow 3s linear infinite;
        }
        @keyframes rgbFlow { 0%{background-position:0%} 100%{background-position:300%} }

        .nav-title {
            font-size: 1.3rem; 
            font-weight: bold; 
            background: linear-gradient(90deg, #00fffc, #fc00ff, #fffc00);
            -webkit-background-clip: text; 
            background-clip: text; 
            color: transparent; 
            text-transform: uppercase;
            font-family: 'NombresPersonalizada', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .menu-toggle { 
            background: linear-gradient(45deg, #00fffc, #fc00ff); 
            border: none; 
            cursor: pointer; 
            padding: 12px; 
            border-radius: 8px; 
            box-shadow: 0 0 10px rgba(0,255,252,0.3); 
            transition: all .3s; 
        }
        .menu-toggle:hover { transform: scale(1.1); }
        .hamburger span { 
            display: block; 
            height: 2px; 
            width: 25px; 
            background: white; 
            margin: 5px 0; 
            transition: all .4s cubic-bezier(0.68,-0.55,0.265,1.55); 
        }
        .menu-toggle.active .hamburger span:nth-child(1) { transform: rotate(45deg) translate(5px,5px); }
        .menu-toggle.active .hamburger span:nth-child(2) { opacity: 0; }
        .menu-toggle.active .hamburger span:nth-child(3) { transform: rotate(-45deg) translate(7px,-6px); }

        .nav-menu {
            position: fixed; 
            top: 0; 
            right: -100%; 
            width: 320px; 
            height: 100vh; 
            background: rgba(10,10,20,0.98);
            backdrop-filter: blur(20px); 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center;
            transition: all .5s cubic-bezier(0.68,-0.55,0.265,1.55); 
            border-left: 3px solid; 
            border-image: linear-gradient(#00fffc, #fc00ff) 1;
            z-index: 1001;
        }
        .nav-menu.active { right: 0; }
        .nav-item {
            padding: 1.5rem 3rem; 
            font-size: 1.4rem; 
            text-transform: uppercase; 
            cursor: pointer; 
            width: 100%; 
            text-align: center;
            background: rgba(255,255,255,0.05); 
            border-radius: 10px; 
            margin: 0.5rem 0; 
            font-family: 'NombresPersonalizada', sans-serif;
            color: #00fffc;
            transition: all 0.3s ease;
        }
        .nav-item:hover { 
            background: rgba(0,255,252,0.15); 
            transform: translateX(-10px); 
            color: white;
        }

        .menu-overlay {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.7); 
            backdrop-filter: blur(10px);
            z-index: 999; 
            opacity: 0; 
            visibility: hidden; 
            transition: all .4s;
        }
        .menu-overlay.active { opacity: 1; visibility: visible; }

        /* ===== CATALOGO DPCCREA ===== */
        .section { padding: 8rem 2rem; text-align: center; }
        .section-title {
            font-size: 3.5rem; 
            margin-bottom: 4rem; 
            font-family: 'NombresPersonalizada', sans-serif; 
            color: #00fffc;
            position: relative;
        }
        .section-title::after {
            content: ''; 
            position: absolute; 
            bottom: -10px; 
            left: 50%; 
            transform: translateX(-50%);
            width: 120px; 
            height: 4px; 
            background: linear-gradient(90deg, #00fffc, #fc00ff);
        }

        /* Galer√≠a para Desktop */
        .gallery {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            padding: 30px;
            max-width: 1500px;
            margin: 0 auto;
            overflow-x: hidden;
        }
        .gallery-item {
            border: 4px solid #00fffc;
            border-radius: 15px;
            overflow: hidden;
            aspect-ratio: 1/1;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 0 10px rgba(0,255,252,0.3);
            position: relative;
            cursor: pointer;
        }
        .gallery-item:hover {
            transform: scale(1.03);
            box-shadow: 0 0 20px rgba(0,255,252,0.6);
            border-color: #fffc00;
        }
        .gallery img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease-in-out;
            loading: lazy;
        }
        .gallery-item:hover img {
            transform: scale(1.05);
        }

        /* Lista para m√≥viles */
        .list-container {
            display: none;
            padding: 20px;
            max-width: 1500px;
            margin: 0 auto;
        }
        .list-item {
            border: 4px solid #00fffc;
            border-radius: 15px;
            overflow: hidden;
            aspect-ratio: 1/1;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 0 10px rgba(0,255,252,0.3);
            position: relative;
            cursor: pointer;
            margin-bottom: 20px;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }
        .list-item:hover {
            transform: scale(1.03);
            box-shadow: 0 0 20px rgba(0,255,252,0.6);
        }
        .list-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease-in-out;
            loading: lazy;
        }

        /* ===== BOT√ìN DE COMENTARIOS (SIN BRILLO) ===== */
        .bubble {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00fffc;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #00fffc;
            font-size: 24px;
            cursor: pointer;
            position: fixed;
            bottom: 30px;
            right: 30px;
            transition: all 0.3s ease;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        .bubble:hover {
            transform: scale(1.1);
            background: rgba(0, 255, 252, 0.1);
            color: white;
        }

        /* ===== MEN√ö DE COMENTARIOS ===== */
        .menu-comments {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.7);
            background: rgba(0, 0, 0, 0.95);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #00fffc;
            box-shadow: 0 0 20px rgba(0,255,252,0.5);
            text-align: center;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 1002;
        }
        .menu-comments.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        .menu-comments h2 {
            margin: 0 0 15px;
            font-size: 1.8rem;
            color: #00fffc;
        }

        /* ===== SECCI√ìN DE COMENTARIOS ===== */
        .comment-section {
            max-width: 750px;
            margin: 1rem auto;
            padding: 0 10px;
        }
        .comment-form {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00fffc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .comment-form h2 {
            color: #00fffc;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .comment-form input, .comment-form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            background: rgba(255,255,255,0.1);
            border: 1px solid #00fffc;
            color: white;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }
        .comment-form textarea {
            height: 100px;
            resize: none;
        }
        .comment-form button {
            background: linear-gradient(45deg, #00fffc, #fc00ff);
            border: none;
            color: #000;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-weight: bold;
            width: 100%;
        }
        .comment-form button:hover {
            transform: scale(1.02);
        }
        .comment-list {
            margin-top: 2rem;
        }
        .comment {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00fffc;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            position: relative;
        }
        .comment img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid #00fffc;
            margin-right: 10px;
            float: left;
        }
        .comment strong {
            color: #00fffc;
        }
        .comment p {
            margin: 8px 0;
            color: #ddd;
        }
        .comment .timestamp {
            font-size: 0.8rem;
            color: #fc00ff;
        }

        /* ===== FOOTER ===== */
        .footer { 
            background: rgba(0,0,0,0.9); 
            padding: 3rem 2rem; 
            text-align: center; 
            font-family: 'FrasesPersonalizada', sans-serif; 
            position: relative;
            border-top: 2px solid #00fffc;
        }
        .footer p {
            margin: 10px 0;
            color: #ccc;
        }
        .footer a {
            color: #00fffc;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }
        .footer a:hover {
            color: #fc00ff;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .glitch { font-size: 4rem; }
            .gallery { display: none; }
            .list-container { display: block; }
            .bubble {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 20px;
                right: 20px;
            }
            .nav-container { padding: 0.8rem 1rem; }
            .nav-title { font-size: 1rem; }
            .section { padding: 6rem 1rem; }
            .section-title { font-size: 2.5rem; }
            .nav-menu { width: 280px; }
            .menu-comments {
                width: 95%;
                padding: 20px;
            }
        }

        @media (min-width: 769px) {
            .list-container { display: none; }
        }
    </style>
</head>
<body>
    <!-- NAV MENU -->
    <div class="nav-container">
        <div class="nav-title" id="navTitle">DPCCREA</div>
        <button class="menu-toggle" id="menuToggle">
            <div class="hamburger"><span></span><span></span><span></span></div>
        </button>
        <nav class="nav-menu" id="navMenu">
            <div class="nav-item" onclick="location.href='index.html'">INICIO</div>
            <div class="nav-item" onclick="location.href='perfil.html'">PERFIL</div>
            <div class="nav-item" onclick="location.href='creadores.html'">CREADORES</div>
            <div class="nav-item" onclick="location.href='campa√±a.html'">CAMPA√ëA</div>
            <div class="nav-item counter-container" id="visitor-counter" style="color: #00fffc; font-size: 1.2rem;">
                <span>Cargando contador...</span>
            </div>
        </nav>
    </div>

    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="content" id="mainContent">
        <!-- HERO SECTION -->
        <section class="hero">
            <h1 class="glitch">DPCCREA</h1>
            <div class="typewriter-container">
                <div class="typewriter"><span class="typewriter-text" id="typewriter"></span></div>
            </div>
            <button class="btn" onclick="document.querySelector('.section').scrollIntoView({behavior:'smooth'})" style="
                padding: 1.2rem 3rem;
                background: linear-gradient(45deg, #00fffc, #fc00ff);
                border: none; 
                border-radius: 50px; 
                color: white; 
                font-weight: bold; 
                text-transform: uppercase;
                font-family: 'NombresPersonalizada', sans-serif; 
                cursor: pointer; 
                transition: all .3s;
                margin-top: 2rem;
                font-size: 1.1rem;
            ">EXPLORAR CAT√ÅLOGO</button>
        </section>

        <!-- CAT√ÅLOGO SECTION -->
        <section class="section">
            <h2 class="section-title">Recursos Educativos</h2>
            
            <!-- Galer√≠a para Desktop -->
            <div class="gallery" id="catalogo">
                <div class="gallery-item" onclick="window.location.href='Mediaci√≥n.html'">
                    <img src="assets/imagenes/1.jpg" alt="Mediaci√≥n Escolar">
                </div>
                <div class="gallery-item" onclick="window.location.href='sexualidad.html'">
                    <img src="assets/imagenes/2.jpg" alt="Sexualidad e Identidad">
                </div>
                <div class="gallery-item" onclick="window.location.href='arbol.html'">
                    <img src="assets/imagenes/3.jpg" alt="Diversidad Cultural">
                </div>
                <div class="gallery-item" onclick="window.location.href='pdf.html'">
                    <img src="assets/imagenes/4.jpg" alt="Recursos Educativos">
                </div>
                <div class="gallery-item" onclick="window.location.href='campa√±a.html'">
                    <img src="assets/imagenes/52.jpg" alt="Educaci√≥n Inclusiva">
                </div>
                <div class="gallery-item" onclick="window.location.href='23.html'">
                    <img src="assets/imagenes/61.png" alt="Bienestar Emocional">
                </div>
                <div class="gallery-item" onclick="window.location.href='Nutri.html'">
                    <img src="assets/imagenes/71.png" alt="G√©nero y Equidad">
                </div>
                <div class="gallery-item" onclick="window.location.href='nueva4.html'">
                    <img src="assets/imagenes/8.jpg" alt="Comunidad Segura">
                </div>
            </div>

            <!-- Lista para M√≥viles -->
            <div class="list-container" id="catalogo-list">
                <div class="list-item" onclick="window.location.href='Mediaci√≥n.html'">
                    <img src="assets/imagenes/1.jpg" alt="Mediaci√≥n Escolar">
                </div>
                <div class="list-item" onclick="window.location.href='sexualidad.html'">
                    <img src="assets/imagenes/2.jpg" alt="Sexualidad e Identidad">
                </div>
                <div class="list-item" onclick="window.location.href='arbol.html'">
                    <img src="assets/imagenes/3.jpg" alt="Diversidad Cultural">
                </div>
                <div class="list-item" onclick="window.location.href='pdf.html'">
                    <img src="assets/imagenes/4.jpg" alt="Recursos Educativos">
                </div>
                <div class="list-item" onclick="window.location.href='campa√±a.html'">
                    <img src="assets/imagenes/52.jpg" alt="Educaci√≥n Inclusiva">
                </div>
                <div class="list-item" onclick="window.location.href='23.html'">
                    <img src="assets/imagenes/61.png" alt="Bienestar Emocional">
                </div>
                <div class="list-item" onclick="window.location.href='Nutri.html'">
                    <img src="assets/imagenes/71.png" alt="G√©nero y Equidad">
                </div>
                <div class="list-item" onclick="window.location.href='nueva4.html'">
                    <img src="assets/imagenes/8.jpg" alt="Comunidad Segura">
                </div>
            </div>

            <!-- GIF RAINBOW -->
            <div style="margin: 3rem auto; display: flex; justify-content: center;">
                <img src="assets/imagenes/rainbow.gif" alt="Rainbow Animation" style="width: 200px; height: 200px; border-radius: 10px; border: 2px solid #00fffc;">
            </div>
        </section>
    </div>

    <!-- BOT√ìN DE COMENTARIOS -->
    <div class="bubble" id="commentBubble">üí¨</div>

    <!-- MEN√ö DE COMENTARIOS -->
    <div class="menu-overlay" id="commentsOverlay">
        <div class="menu-comments" id="commentsMenu">
            <h2>COMENTARIOS</h2>
            <div class="comment-section">
                <div class="comment-form">
                    <h2>DEJA TU COMENTARIO</h2>
                    <input type="text" id="nameInput" placeholder="Nombre (configura en tu perfil)" maxlength="30" readonly>
                    <textarea id="commentInput" placeholder="Escribe tu comentario..." maxlength="500"></textarea>
                    <button id="submitComment">ENVIAR COMENTARIO</button>
                </div>
                <div class="comment-list" id="commentList">
                    <p style="color: #00fffc; text-align: center;">Cargando comentarios...</p>
                </div>
            </div>
            <button onclick="toggleComments()" style="
                margin: 20px auto 0;
                padding: 10px 25px;
                background: linear-gradient(45deg, #fc00ff, #00fffc);
                border: none;
                color: white;
                border-radius: 8px;
                cursor: pointer;
                font-weight: bold;
                display: block;
                width: 100%;
            ">CERRAR</button>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p>¬© 2025 DPCCREA ‚Äî Recursos educativos sobre sexualidad, identidad y diversidad</p>
        <p>Dise√±ado con pasi√≥n por L_Adriano</p>
        <p style="margin-top: 1rem; font-size: 0.9rem;">
            <a href="terminos.html">T√©rminos y Condiciones</a>
            <span style="color: #fc00ff; margin: 0 10px;">|</span>
            <a href="privacidad.html">Pol√≠tica de Privacidad</a>
        </p>
    </footer>

    <!-- SCRIPTS -->
    <script type="module">
        // FIREBASE CONFIGURACI√ìN
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getFirestore, doc, getDoc, updateDoc, increment, collection, query, orderBy, onSnapshot, addDoc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDp7VT6HMYBgqnrYfc84Tk9kh82nCBTYtM",
            authDomain: "dpccrea-login.firebaseapp.com",
            projectId: "dpccrea-login",
            appId: "1:822726011803:web:6b8f3e6a9d8c7b2e8f4e5d"
        };

        try {
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            
            // CONTADOR DE VISITAS
            const counterDoc = doc(db, "visitas", "contador");
            const visitorCounter = document.getElementById("visitor-counter");
            
            // COMENTARIOS
            const commentsCollection = collection(db, "comentarios");
            const nameInput = document.getElementById('nameInput');
            const commentInput = document.getElementById('commentInput');
            const submitComment = document.getElementById('submitComment');
            const commentList = document.getElementById('commentList');
            
            let currentUser = JSON.parse(localStorage.getItem('dpccrea_user')) || {};
            
            // CARGAR CONTADOR
            onSnapshot(counterDoc, (doc) => {
                if (doc.exists()) {
                    const count = doc.data().count;
                    visitorCounter.innerHTML = `<span style="color: #00fffc;">Visitas: ${new Intl.NumberFormat().format(count)}</span>`;
                }
            });
            
            // INCREMENTAR CONTADOR CADA 12 HORAS
            const lastVisit = localStorage.getItem("dpccrea_lastVisit");
            const now = Date.now();
            const twelveHours = 43200000;
            if (!lastVisit || now - parseInt(lastVisit) > twelveHours) {
                updateDoc(counterDoc, { count: increment(1) }).then(() => {
                    localStorage.setItem("dpccrea_lastVisit", now.toString());
                });
            }
            
            // CONFIGURAR NOMBRE DE USUARIO
            const setupNameField = () => {
                if (nameInput && currentUser.username) {
                    nameInput.value = currentUser.username;
                    nameInput.title = "Nombre configurado en tu perfil";
                } else {
                    nameInput.value = "";
                    nameInput.placeholder = "Configura tu nombre en el perfil";
                }
            };
            
            // CARGAR COMENTARIOS
            const loadComments = () => {
                const q = query(commentsCollection, orderBy("timestamp", "desc"));
                onSnapshot(q, (snapshot) => {
                    if (commentList.querySelector('p')) {
                        commentList.innerHTML = '';
                    }
                    snapshot.forEach((doc) => {
                        let data = doc.data();
                        let commentEl = document.createElement("div");
                        commentEl.className = "comment";
                        commentEl.innerHTML = `
                            <img src="${data.profilePic || 'https://via.placeholder.com/50'}" alt="Perfil">
                            <strong>${data.name || "An√≥nimo"}</strong>
                            <p>${data.message}</p>
                            <p class="timestamp">${new Date(data.timestamp?.toDate() || data.timestamp).toLocaleString("es-ES")}</p>
                        `;
                        commentList.appendChild(commentEl);
                    });
                });
            };
            
            // ENVIAR COMENTARIO
            const submitCommentHandler = () => {
                let name = currentUser.username || "An√≥nimo";
                let message = commentInput.value.trim();
                
                if (!currentUser.username) {
                    alert("Por favor, configura tu nombre en el perfil primero.");
                    return;
                }
                
                if (!message) {
                    alert("Por favor, escribe un comentario.");
                    return;
                }
                
                submitComment.disabled = true;
                let timestamp = new Date().toISOString();
                
                addDoc(commentsCollection, {
                    name: name,
                    message: message,
                    timestamp: timestamp,
                    profilePic: currentUser.profilePic || 'https://via.placeholder.com/50'
                }).then(() => {
                    commentInput.value = "";
                    submitComment.disabled = false;
                }).catch(error => {
                    console.error("Error al enviar comentario:", error);
                    submitComment.disabled = false;
                });
            };
            
            // INICIALIZAR
            document.addEventListener("DOMContentLoaded", () => {
                setupNameField();
                loadComments();
                
                if (submitComment) {
                    submitComment.addEventListener("click", submitCommentHandler);
                }
                
                if (commentInput) {
                    commentInput.addEventListener("keypress", (e) => {
                        if (e.key === "Enter" && !e.shiftKey) {
                            e.preventDefault();
                            submitCommentHandler();
                        }
                    });
                }
            });
            
        } catch (err) {
            console.error("Error con Firebase:", err);
            visitorCounter.innerHTML = `<span style="color: #fc00ff;">Error de conexi√≥n</span>`;
        }
    </script>

    <script>
        // TEXTS PARA TYPEWRITER
        const heroTexts = [
            "Educaci√≥n sobre sexualidad e identidad...",
            "Diversidad y respeto...",
            "Recursos educativos para todos...",
            "Pagina libre para todos..."
        ];

        // TYPEWRITER CLASS
        class TypeWriter {
            constructor(el, phrases, speed=90, del=40, pause=2000) {
                this.el = el;
                this.phrases = phrases;
                this.speed = speed;
                this.del = del;
                this.pause = pause;
                this.i = 0;
                this.j = 0;
                this.deleting = false;
                this.type();
            }
            type() {
                const full = this.phrases[this.i];
                this.el.textContent = this.deleting ? full.substring(0, this.j--) : full.substring(0, this.j++);
                if (!this.deleting && this.j === full.length) {
                    setTimeout(() => this.deleting = true, this.pause);
                } else if (this.deleting && this.j === 0) {
                    this.deleting = false;
                    this.i = (this.i + 1) % this.phrases.length;
                }
                setTimeout(() => this.type(), this.deleting ? this.del : this.speed);
            }
        }

        // MEN√ö HAMBURGUESA
        const menuToggle = document.getElementById('menuToggle');
        const navMenu = document.getElementById('navMenu');
        const menuOverlay = document.getElementById('menuOverlay');
        
        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navMenu.classList.toggle('active');
            menuOverlay.classList.toggle('active');
        });
        
        menuOverlay.addEventListener('click', () => {
            menuToggle.classList.remove('active');
            navMenu.classList.remove('active');
            menuOverlay.classList.remove('active');
        });

        // COMENTARIOS
        const commentBubble = document.getElementById('commentBubble');
        const commentsMenu = document.getElementById('commentsMenu');
        const commentsOverlay = document.getElementById('commentsOverlay');
        
        function toggleComments() {
            commentsOverlay.classList.toggle('active');
            commentsMenu.classList.toggle('active');
        }

        commentBubble.addEventListener('click', toggleComments);
        commentsOverlay.addEventListener('click', (e) => {
            if (e.target === commentsOverlay) toggleComments();
        });

        // INICIALIZAR TYPEWRITER
        document.addEventListener('DOMContentLoaded', () => {
            new TypeWriter(document.getElementById('typewriter'), heroTexts);
        });

        // NAV TITLE ANIMATION
        const navTitle = document.getElementById('navTitle');
        const navTitles = ["DPCCREA", "MathiGod", "L_Adriano", "5B", "‚ù§Ô∏ès"];
        let currentNavTitle = 0;
        
        function rotateNavTitle() {
            navTitle.style.opacity = '0';
            setTimeout(() => {
                currentNavTitle = (currentNavTitle + 1) % navTitles.length;
                navTitle.textContent = navTitles[currentNavTitle];
                navTitle.style.opacity = '1';
            }, 500);
        }
        
        // Cambiar t√≠tulo cada 5 segundos
        setInterval(rotateNavTitle, 5000);
    </script>
</body>
</html>
